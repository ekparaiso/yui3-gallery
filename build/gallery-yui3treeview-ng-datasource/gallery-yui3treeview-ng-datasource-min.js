YUI.add("gallery-yui3treeview-ng-datasource",function(g){var b=g.ClassNameManager.getClassName,c="contentBox",a="treeviewdatasource",e="treenode",f={loading:b(e,"loading")};function d(){d.superclass.constructor.apply(this,arguments);}d.NAME=a;d.NS="ds";d.ATTRS={source:{value:null},loadingMsg:{value:null},dataSchemaJSON:{value:{resultListLocator:null,resultFields:null,metaFields:null}},sourceMethod:{value:null,setter:function(i){var h=g.Attribute.INVALID_VALUE;if(["io","get","local"].indexOf(i)>=0){h=i;}return h;}}};g.extend(d,g.Plugin.Base,{initializer:function(){var i=this.get("sourceMethod"),h=this.get("dataSchemaJSON");this.publish("sendRequest",{defaultFn:this._makeRequest});this.publish("onDataReturnSuccess",{defaultFn:this._defSuccessHandler});this.publish("onDataReturnFailure",{defaultFn:this._defFailureHandler});switch(i){case"io":this.treedatasource=new g.DataSource.IO({source:this.get("source")});break;case"get":this.treedatasource=new g.DataSource.Get({source:this.get("source")});break;case"local":this.treedatasource=new g.DataSource.Local({source:this.get("source")});break;}this.treedatasource.plug(g.Plugin.DataSourceJSONSchema,{schema:{resultListLocator:h.resultListLocator,resultFields:h.resultFields}});},load:function(i,h){this.fire("sendRequest",{treenode:i,reuest:h});},_defSuccessHandler:function(i){var h=i.treenode;h.get(c).removeClass(f.loading);if(h._loadingMsgNode!==null){h._loadingMsgNode.remove(true);}h.add(i.response.results);if(h instanceof g.CheckBoxTreeNode){h._syncChildren();}},_defFailureHandler:function(i){var h=i.treenode;h.set("loadOnDemand",true);h.get(c).removeClass(f.loading);},_makeRequest:function(m){var h=m.treenode,j=h.get("loadOnDemand"),l=this.get("loadingMsg"),k=m.request,i=h.get(c),n;if(!j){return;}n={success:g.bind(function(o){this.fire("onDataReturnSuccess",{response:o.response,treenode:h});},this),failure:g.bind(function(o){this.fire("onDataReturnFailure",{error:o.error,treenode:h});},this)};h.set("loadOnDemand",false);h.removeAll();i.addClass(f.loading);if(l){h._loadingMsgNode=i.appendChild(l);}this.treedatasource.sendRequest({request:"?"+k,callback:n});}});g.Plugin.TreeViewDataSource=d;},"@VERSION@",{requires:["gallery-yui3treeview-ng","plugin","datasource","datasource-jsonschema"],skinnable:false});
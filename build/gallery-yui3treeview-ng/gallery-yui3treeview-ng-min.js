YUI.add("gallery-yui3treeview-ng",function(g){var a=g.ClassNameManager.getClassName,d="boundingBox",b="treeview",e="treenode",f={tree:a(e),content:a(e,"content"),label:a(e,"label"),labelContent:a(e,"label-content"),toggle:a(e,"toggle-control"),collapsed:a(e,"collapsed"),leaf:a(e,"leaf"),lastnode:a(e,"last")},c;c=function(j,h){var l=j.all(h),i=Array(),k;l.each(function(m){k={srcNode:m,boundingBox:m,contentBox:m.one("> ul")};i.push(k);});return i;};g.TreeView=g.Base.create(b,g.Widget,[g.WidgetParent],{CONTENT_TEMPLATE:"<ul></ul>",initializer:function(h){this.publish("nodeToggle",{defaultFn:this._nodeToggleDefaultFn});this.publish("nodeCollapse",{defaultFn:this._nodeCollapseDefaultFn});this.publish("nodeExpand",{defaultFn:this._nodeExpandDefaultFn});this.publish("nodeClick",{defaultFn:this._nodeClickDefaultFn});},_nodeClickDefaultFn:function(h){},_nodeToggleDefaultFn:function(h){if(h.treenode.get("collapsed")){this.fire("nodeExpand",{treenode:h.treenode});}else{this.fire("nodeCollapse",{treenode:h.treenode});}},_nodeCollapseDefaultFn:function(h){h.treenode.collapse();},_nodeExpandDefaultFn:function(h){h.treenode.expand();},_setChildEventHandlers:function(){var h;this.after("addChild",function(i){h=i.child.get("parent");if(i.child.get("isLast")&&h.size()>1){h.item(i.child.get("index")-1)._unmarkLast();}});this.on("removeChild",function(i){h=i.child.get("parent");if((h.size()==1)||i.child.get("index")===0){return;}if(i.child.get("isLast")){h.item(i.child.get("index")-1)._markLast();}});},_onClickEvents:function(n){var p=n.target,m=g.Widget.getByNode(p),h=false,k,l,j,o;n.preventDefault();m=g.Widget.getByNode(p);if(!m instanceof g.TreeNode){return;}if(m.get("isLeaf")){return;}j=p.get("className").split(" ");o=j.length;for(k=0;k<o;k++){l=j[k];switch(l){case f.toggle:h=true;break;case f.labelContent:if(this.get("toggleOnLabelClick")){h=true;}break;}}if(h){this.fire("nodeToggle",{treenode:m});}},bindUI:function(){var h;h=this.get(d);h.on("click",this._onClickEvents,this);h.delegate("click",g.bind(function(j){var i=g.Widget.getByNode(j.target);if(i instanceof g.TreeNode){this.fire("nodeclick",{treenode:i});}},this),"."+f.label);this._setChildEventHandlers();}},{NAME:b,ATTRS:{defaultChildType:{value:"TreeNode",readOnly:true},toggleOnLabelClick:{value:true,validator:g.Lang.isBoolean},startCollapsed:{value:true,validator:g.Lang.isBoolean},loadOnDemand:{value:false,validator:g.Lang.isBoolean}},HTML_PARSER:{children:function(h){return c(h,"> li");}}});g.TreeNode=g.Base.create(e,g.Widget,[g.WidgetParent,g.WidgetChild],{_renderFromMarkup:false,CONTENT_TEMPLATE:"<ul></ul>",BOUNDING_TEMPLATE:"<li></li>",TREENODELABEL_TEMPLATE:"<a class={labelClassName} role='treeitem' href='#'></a>",TREENODELABELCONTENT_TEMPLATE:"<span class={labelContentClassName}>{label}</span>",TOGGLECONTROL_TEMPLATE:"<span class={toggleClassName}></span>",bindUI:function(){g.TreeView.prototype._setChildEventHandlers.apply(this,arguments);},renderUI:function(){var i=this.get(d),n,l,k,m,j,h;j=g.substitute(this.TOGGLECONTROL_TEMPLATE,{toggleClassName:f.toggle});if(this._renderFromMarkup){n=i.one(":first-child");n.set("role","treeitem");n.addClass(f.label);k=n.removeChild(n.one(":first-child"));k.addClass(f.labelContent);}else{h=this.get("label");l=g.substitute(this.TREENODELABEL_TEMPLATE,{labelClassName:f.label});m=g.substitute(this.TREENODELABELCONTENT_TEMPLATE,{labelContentClassName:f.labelContent,label:h});k=m;n=g.Node.create(l);i.prepend(n);}if(!this.get("isLeaf")){n.appendChild(j).appendChild(k);}else{n.append(k);}i.set("role","presentation");if(!this.get("isLeaf")){if(this.get("root").get("startCollapsed")){i.addClass(f.collapsed);}else{if(this.size()===0){i.addClass(f.collapsed);}}}if(this.get("isLeaf")){i.addClass(f.leaf);}if(this.get("isLast")){this._markLast();}},_markLast:function(){this.get(d).addClass(f.lastnode);},_unmarkLast:function(){this.get(d).removeClass(f.lastnode);},collapse:function(){var h=this.get(d);if(!h.hasClass(f.collapsed)){h.toggleClass(f.collapsed);}},expand:function(){var h=this.get(d);if(h.hasClass(f.collapsed)){h.toggleClass(f.collapsed);}},toggleState:function(){this.get(d).toggleClass(f.collapsed);},path:function(h){var j=Array(),i=this;if(!h){h={};}if(!h.labelAttr){h.labelAttr="label";}while(i&&(i instanceof g.TreeNode)){j.unshift(i.get(h.labelAttr));i=i.get("parent");}if(h.reverse){j=j.reverse();}return j;},_getToggleControlNode:function(){return this.get(d).one("."+f.toggle);},_getLabelContentNode:function(){return this.get(d).one("."+f.labelContent);}},{NAME:e,ATTRS:{defaultChildType:{value:"TreeNode",readOnly:true},label:{validator:g.Lang.isString,value:""},loadOnDemand:{value:false,validator:g.Lang.isBoolean},collapsed:{value:null,getter:function(){return this.get(d).hasClass(f.collapsed);},readOnly:true},clabel:{value:"",validator:g.Lang.isString},nodeId:{value:"",validator:g.Lang.isString},isLeaf:{value:null,getter:function(){return(this.size()>0?false:true)&&(!this.get("loadOnDemand"));},readOnly:true},isLast:{value:null,getter:function(){return(this.get("index")+1==this.get("parent").size());},readOnly:true}},HTML_PARSER:{children:function(h){return c(h,"> ul > li");},label:function(i){var h=i.one("> a > span");if(h!==null){this._renderFromMarkup=true;return h.getContent();}}}});},"@VERSION@",{requires:["substitute","widget","widget-parent","widget-child","node-focusmanager","array-extras"],skinnable:true});
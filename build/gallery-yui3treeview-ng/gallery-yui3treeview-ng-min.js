YUI.add("gallery-yui3treeview-ng",function(f){var a=f.ClassNameManager.getClassName,c="boundingBox",d="treenode",e={tree:a(d),content:a(d,"content"),label:a(d,"label"),labelContent:a(d,"label-content"),toggle:a(d,"toggle-control"),collapsed:a(d,"collapsed"),leaf:a(d,"leaf"),lastnode:a(d,"last")},b;b=function(i,g){var k=i.all(g),h=Array(),j;k.each(function(l){j={srcNode:l,boundingBox:l,contentBox:l.one("> ul")};h.push(j);});return h;};f.TreeView=f.Base.create("treeview",f.Widget,[f.WidgetParent],{CONTENT_TEMPLATE:"<ul></ul>",initializer:function(g){this.publish("nodeToggle",{defaultFn:this._nodeToggleDefaultFn});this.publish("nodeCollapse",{defaultFn:this._nodeCollapseDefaultFn});this.publish("nodeExpand",{defaultFn:this._nodeExpandDefaultFn});this.publish("nodeClick",{defaultFn:this._nodeClickDefaultFn});},_nodeClickDefaultFn:function(g){},_nodeToggleDefaultFn:function(g){if(g.treenode.get("collapsed")){this.fire("nodeExpand",{treenode:g.treenode});}else{this.fire("nodeCollapse",{treenode:g.treenode});}},_nodeCollapseDefaultFn:function(g){g.treenode.collapse();},_nodeExpandDefaultFn:function(g){g.treenode.expand();},bindUI:function(){var g,h;g=this.get(c);g.on("click",this.onClickEvents,this);g.delegate("click",f.bind(function(j){var i=f.Widget.getByNode(j.target);if(i instanceof f.TreeNode){this.fire("nodeclick",{treenode:i});}},this),"."+e.label);this.after("addChild",function(i){h=i.child.get("parent");if(i.child.get("isLast")){h.item(i.index-1)._unmarkLast();}});this.on("removeChild",function(i){h=i.child.get("parent");if(i.child.get("isLast")){h.item(i.index-1)._markLast();}});},onClickEvents:function(m){var o=m.target,l=f.Widget.getByNode(o),g=false,j,k,h,n;m.preventDefault();l=f.Widget.getByNode(o);if(!l instanceof f.TreeNode){return;}if(l.get("isLeaf")){return;}h=o.get("className").split(" ");n=h.length;for(j=0;j<n;j++){k=h[j];switch(k){case e.toggle:g=true;break;case e.labelContent:if(this.get("toggleOnLabelClick")){g=true;}break;}}if(g){this.fire("nodeToggle",{treenode:l});}}},{NAME:"treeview",ATTRS:{defaultChildType:{value:"TreeNode",readOnly:true},toggleOnLabelClick:{value:true,validator:f.Lang.isBoolean},startCollapsed:{value:true,validator:f.Lang.isBoolean},loadOnDemand:{value:false,validator:f.Lang.isBoolean}},HTML_PARSER:{children:function(g){return b(g,"> li");}}});f.TreeNode=f.Base.create(d,f.Widget,[f.WidgetParent,f.WidgetChild],{_renderFromMarkup:false,CONTENT_TEMPLATE:"<ul></ul>",BOUNDING_TEMPLATE:"<li></li>",TREENODELABEL_TEMPLATE:"<a class={labelClassName} role='treeitem' href='#'></a>",TREENODELABELCONTENT_TEMPLATE:"<span class={labelContentClassName}>{label}</span>",TOGGLECONTROL_TEMPLATE:"<span class={toggleClassName}></span>",renderUI:function(){var h=this.get(c),m,k,j,l,i,g;i=f.substitute(this.TOGGLECONTROL_TEMPLATE,{toggleClassName:e.toggle});if(this._renderFromMarkup){m=h.one(":first-child");m.set("role","treeitem");m.addClass(e.label);j=m.removeChild(m.one(":first-child"));j.addClass(e.labelContent);}else{g=this.get("label");k=f.substitute(this.TREENODELABEL_TEMPLATE,{labelClassName:e.label});l=f.substitute(this.TREENODELABELCONTENT_TEMPLATE,{labelContentClassName:e.labelContent,label:g});j=l;m=f.Node.create(k);h.prepend(m);}if(!this.get("isLeaf")){m.appendChild(i).appendChild(j);}else{m.append(j);}h.set("role","presentation");if(!this.get("isLeaf")){if(this.get("root").get("startCollapsed")){h.addClass(e.collapsed);}else{if(this.size()===0){h.addClass(e.collapsed);}}}if(this.get("isLeaf")){h.addClass(e.leaf);}if(this.get("isLast")){this._markLast();}},_markLast:function(){this.get(c).addClass(e.lastnode);},_unmarkLast:function(){this.get(c).removeClass(e.lastnode);},collapse:function(){var g=this.get(c);if(!g.hasClass(e.collapsed)){g.toggleClass(e.collapsed);}},expand:function(){var g=this.get(c);if(g.hasClass(e.collapsed)){g.toggleClass(e.collapsed);}},toggleState:function(){this.get(c).toggleClass(e.collapsed);},path:function(g){var i=Array(),h=this;if(!g){g={};}if(!g.labelAttr){g.labelAttr="label";}while(h&&(h instanceof f.TreeNode)){i.unshift(h.get(g.labelAttr));h=h.get("parent");}if(g.reverse){i=i.reverse();}return i;},_getToggleControlNode:function(){return this.get(c).one("."+e.toggle);},_getLabelContentNode:function(){return this.get(c).one("."+e.labelContent);}},{NAME:d,ATTRS:{defaultChildType:{value:"TreeNode",readOnly:true},label:{validator:f.Lang.isString,value:""},loadOnDemand:{value:false,validator:f.Lang.isBoolean},collapsed:{value:null,getter:function(){return this.get(c).hasClass(e.collapsed);},readOnly:true},clabel:{value:"",validator:f.Lang.isString},nodeId:{value:"",validator:f.Lang.isString},isLeaf:{value:null,getter:function(){return(this.size()>0?false:true)&&(!this.get("loadOnDemand"));},readOnly:true},isLast:{value:null,getter:function(){return(this.get("index")+1==this.get("parent").size());},readOnly:true}},HTML_PARSER:{children:function(g){return b(g,"> ul > li");},label:function(h){var g=h.one("> a > span");if(g!==null){this._renderFromMarkup=true;return g.getContent();}}}});},"@VERSION@",{requires:["substitute","widget","widget-parent","widget-child","node-focusmanager","array-extras"],skinnable:true});